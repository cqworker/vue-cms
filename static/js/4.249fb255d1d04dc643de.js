webpackJsonp([4],{"0xDb":function(t,e,a){"use strict";a.d(e,"a",function(){return r}),a.d(e,"b",function(){return l});function r(t,e,a){var r=void 0,l=void 0,n=void 0,i=void 0,o=void 0,u=function u(){var s=+new Date-i;s<e&&s>0?r=setTimeout(u,e-s):(r=null,a||(o=t.apply(n,l),r||(n=l=null)))};return function(){for(var l=arguments.length,s=Array(l),c=0;c<l;c++)s[c]=arguments[c];n=this,i=+new Date;var d=a&&!r;return r||(r=setTimeout(u,e)),d&&(o=t.apply(n,s),n=s=null),o}}var l=!1},TmV0:function(t,e,a){a("fZOM"),t.exports=a("FeBl").Object.values},"U6+u":function(t,e){},cK4b:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("gRE1"),l=a.n(r),n=a("//Fk"),i=a.n(n),o=a("mtWM"),u=a.n(o),s=a("0xDb");var c={data:function(){return{isDev:null,downloadLoading:!1,tableDataLoading:!0,tableData:[],filename:"",autoWidth:!0,refresh:!0,percentageNum:100,timer:0,updateTime:""}},methods:{_getTable:function(){var t=this;(s.b?u.a.post("/api/getmoviepiaofang"):new i.a(function(t,e){setTimeout(t,2e3,u.a.post("/api/getmoviepiaofang-mock"))})).then(function(e){if(t.isDev){var a=e.data.real.data.detail;t.updateTime=e.data.real.data.total.message,t.formatMovieData(a),t.tableData=a,t.tableDataLoading=!1}else{e.data=JSON.parse(e.data);var r=e.data.real.data.detail;t.updateTime=e.data.real.data.total.message,t.formatMovieData(r),t.tableData=r,t.tableDataLoading=!1}})},updateData:function(){var t=this;this.refresh=!1,this.percentageNum=0,this.timer=window.setInterval(function(){t.percentageNum<100?t.percentageNum+=1:(t.percentageNum=100,t.refresh=!0,window.clearInterval(t.timer))},100),this.tableDataLoading=!0,this._getTable()},handleDownload:function(){var t=this;this.downloadLoading=!0,a.e(11).then(a.bind(null,"zWO4")).then(function(e){var a=t.tableData,r=t.formatJson(["影片","上映天数","累计票房","实时票房","票房占比","排片占比","上座率","排座占比","场次","人次","场均人次","场均收入","平均票价"],a);e.export_json_to_excel({header:["影片","上映天数","累计票房","实时票房","票房占比","排片占比","上座率","排座占比","场次","人次","场均人次","场均收入","平均票价"],data:r,filename:t.filename||"excel-list",autoWidth:t.autoWidth}),t.downloadLoading=!1})},formatJson:function(t,e){return e.map(function(e){return t.map(function(t){return"影片"===t?e.movieName:e[t]})})},formatMovieData:function(t){t.forEach(function(t){l()(t.attribute).forEach(function(e,a,r){t[e.attrName]=e.attrValue})})}},created:function(){this.isDev=!1,this.tableDataLoading=!0,this._getTable()}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("el-input",{staticStyle:{width:"350px"},attrs:{autosize:"","prefix-icon":"el-icon-document",placeholder:"请输入文件名（默认excel-list）"},model:{value:t.filename,callback:function(e){t.filename=e},expression:"filename"}}),t._v(" "),a("el-button",{staticStyle:{margin:"0 0 20px 20px"},attrs:{type:"primary",icon:"document",loading:t.downloadLoading},on:{click:t.handleDownload}},[t._v("export excel")]),t._v(" "),a("div",{staticClass:"fresh"},[a("el-progress",{staticClass:"progress",attrs:{"text-inside":!0,"stroke-width":18,percentage:t.percentageNum,status:"success"}}),t._v(" "),a("span",[t._v(t._s(t.updateTime))]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.refresh,expression:"refresh"}],staticClass:"timer",attrs:{icon:"el-icon-refresh",type:"text"},on:{click:t.updateData}},[t._v("更新数据")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.refresh,expression:"!refresh"}],staticClass:"timer",attrs:{icon:"el-icon-refresh",type:"text",disabled:""}},[t._v("更新数据")])],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableDataLoading,expression:"tableDataLoading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,height:"700"}},[a("el-table-column",{attrs:{fixed:"",prop:"movieName",label:"影片",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"attribute[1].attrValue",label:"上映天数",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"attribute[2].attrValue",label:"累计票房",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"attribute[3].attrValue",label:"实时票房",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"attribute[4].attrValue",label:"票房占比",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"attribute[5].attrValue",label:"排片占比",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"attribute[6].attrValue",label:"上座率",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"attribute[7].attrValue",label:"排座占比",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"attribute[8].attrValue",label:"场次",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"attribute[9].attrValue",label:"人次",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"attribute[10].attrValue",label:"场均人次",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"attribute[11].attrValue",label:"场均收入",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"attribute[12].attrValue",label:"平均票价",width:"120"}})],1)],1)},staticRenderFns:[]};var p=a("VU/8")(c,d,!1,function(t){a("U6+u")},"data-v-48b3d4dd",null);e.default=p.exports},fZOM:function(t,e,a){var r=a("kM2E"),l=a("mbce")(!1);r(r.S,"Object",{values:function(t){return l(t)}})},gRE1:function(t,e,a){t.exports={default:a("TmV0"),__esModule:!0}},mbce:function(t,e,a){var r=a("lktj"),l=a("TcQ7"),n=a("NpIQ").f;t.exports=function(t){return function(e){for(var a,i=l(e),o=r(i),u=o.length,s=0,c=[];u>s;)n.call(i,a=o[s++])&&c.push(t?[a,i[a]]:i[a]);return c}}}});
//# sourceMappingURL=4.249fb255d1d04dc643de.js.map